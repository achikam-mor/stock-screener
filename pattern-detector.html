<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Resource Hints for Performance -->
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="preconnect" href="https://pagead2.googlesyndication.com">
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    
    <!-- Google Analytics - Deferred -->
    <script defer src="https://www.googletagmanager.com/gtag/js?id=G-VN5G5CV48N"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-VN5G5CV48N');
    </script>
    
    <meta name="google-adsense-account" content="ca-pub-9520776475659458">
    <meta name="description" content="Advanced pattern detector for stocks - Find candlestick patterns, cup and handle formations, golden cross and death cross signals across all stocks regardless of SMA distance.">
    <meta name="keywords" content="pattern detector, candlestick patterns, cup and handle, golden cross, death cross, stock patterns, technical analysis, pattern scanner">
    <title>Pattern Detector | Advanced Stock Pattern Scanner</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="StockScreen">
    
    <link rel="stylesheet" href="styles.css?v=3.17">
    <!-- AdSense loaded via lazy-load script for better performance -->
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">Stock Scanner</div>
            <ul class="nav-menu">
                <li><a href="home.html">Home</a></li>
                <li><a href="hot-stocks.html">ğŸ”¥ Hot Stocks</a></li>
                <li><a href="watch-list.html">ğŸ‘€ Watch List</a></li>
                <li><a href="filtered-stocks.html">ğŸ”€ Filtered</a></li>
                <li><a href="favorites.html">â­ Favorites</a></li>
                <li><a href="pattern-detector.html" class="active">ğŸ” Pattern Detector</a></li>
                <li><a href="market-overview.html">ğŸ“Š Market</a></li>
                <li><a href="chart-viewer.html">ğŸ“ˆ Charts</a></li>
                <li><a href="compare.html">ğŸ”„ Compare</a></li>
                <li><a href="export.html">ğŸ“¥ Export</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <header>
            <h1>ğŸ” Pattern Detector</h1>
            <p class="subtitle">Find stocks with specific patterns, crosses, or cup & handle formations - regardless of SMA distance</p>
            
            <div class="search-container">
                <input type="text" id="ticker-search" placeholder="ğŸ” Search ticker..." maxlength="10">
                <button id="search-button" onclick="searchTicker()">ğŸ” Search</button>
            </div>
            <div id="search-notification" class="search-notification"></div>
            
            <!-- Filters -->
            <div class="filters-container">
                <div class="filter-group">
                    <label for="sma-status-filter">SMA Status:</label>
                    <select id="sma-status-filter" onchange="applyFilters()">
                        <option value="all">All</option>
                        <option value="above">Above SMA150</option>
                        <option value="below">Below SMA150</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="sma-distance-filter">SMA Distance:</label>
                    <select id="sma-distance-filter" onchange="applyFilters()">
                        <option value="all">All</option>
                        <option value="0-4">0-4% (Tight)</option>
                        <option value="4-10">4-10%</option>
                        <option value="10-20">10-20%</option>
                        <option value="20-100">> 20%</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="pattern-filter">Candlestick Patterns:</label>
                    <select id="pattern-filter" onchange="applyFilters()">
                        <option value="all">All</option>
                        <option value="bullish_confirmed">ğŸŸ¢ Bullish Confirmed</option>
                        <option value="pending_bullish">ğŸŸ¡ Pending Bullish</option>
                        <option value="pending_bearish">ğŸŸ  Pending Bearish</option>
                        <option value="bearish_confirmed">ğŸ”´ Bearish Confirmed</option>
                        <option value="any_pattern">ğŸ•¯ï¸ Any Pattern</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="cross-filter">Moving Avg Cross:</label>
                    <select id="cross-filter" onchange="applyFilters()">
                        <option value="all">All</option>
                        <option value="golden">âœ¨ Golden Cross</option>
                        <option value="death">ğŸ’€ Death Cross</option>
                        <option value="any">Any Cross</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="cup-handle-filter">Cup & Handle:</label>
                    <select id="cup-handle-filter" onchange="applyFilters()">
                        <option value="all">All</option>
                        <option value="confirmed">â˜• Confirmed</option>
                        <option value="forming">ğŸº Forming</option>
                        <option value="any">â˜• Any C&H</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="sector-filter">Sector:</label>
                    <select id="sector-filter" onchange="applyFilters()">
                        <option value="all">All Sectors</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="favorites-filter">Favorites:</label>
                    <select id="favorites-filter" onchange="applyFilters()">
                        <option value="all">All Stocks</option>
                        <option value="favorites">â­ Favorites Only</option>
                        <option value="non-favorites">Non-Favorites</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="atr-filter">ATR %:</label>
                    <select id="atr-filter" onchange="applyFilters()">
                        <option value="all">All</option>
                        <option value="0-2">< 2% (Low)</option>
                        <option value="2-4">2-4% (Med)</option>
                        <option value="4-100">> 4% (High)</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="volume-filter">Volume:</label>
                    <select id="volume-filter" onchange="applyFilters()">
                        <option value="all">All</option>
                        <option value="above">Above Avg</option>
                        <option value="below">Below Avg</option>
                        <option value="high">High (>1.5x)</option>
                    </select>
                </div>
                <button class="filter-reset-btn" onclick="resetFilters()">Reset Filters</button>
            </div>
        </header>

        <div class="page-info">
            <div class="result-count">Total: <span id="total-stocks">0</span> stocks</div>
            <div class="page-count">Page <span id="current-page">1</span> of <span id="total-pages">1</span></div>
        </div>

        <!-- Ad Placeholder - Content Banner -->
        <div class="ad-container ad-banner">
            <!-- new7 -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-9520776475659458"
                 data-ad-slot="1240965795"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>

        <div id="stocks-container" class="stocks-grid">
            <div class="loading">Loading pattern detector data...</div>
        </div>

        <div id="pagination-controls" class="pagination">
            <!-- Pagination buttons will be inserted here -->
        </div>

        <footer>
            <p class="disclaimer">This is not financial advice. Data provided for educational purposes only.</p>
        </footer>
    </div>

    <script src="common.js?v=3.17"></script>
    <script src="stock-notes.js?v=3.17"></script>
    <script src="pattern-detector.js?v=3.17"></script>
</body>
</html>
